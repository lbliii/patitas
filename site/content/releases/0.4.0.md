---
title: "0.4.0"
description: Parse cache, examples, @directive fix
draft: false
weight: 5
lang: en
type: doc
date: 2026-02-14
tags:
- release
- 0.4.0
keywords:
- release
- cache
- examples
- directive
category: releases
icon: tag
---

# 0.4.0

**Released**: 2026-02-14

Parse cache for incremental builds, runnable examples, and directive decorator fix.

## Highlights

- **Parse cache** — Content-addressed `(content_hash, config_hash) -> Document` for faster incremental builds
- **`examples/`** — Runnable examples for basic usage, notebooks, AST, directives, incremental, plugins
- **`@directive` fix** — `parse()` now accepts `options` kwarg (was `opts`), fixing custom directive registration

## Features

### Parse Cache

```python
from patitas import parse, ParseCache, DictParseCache

cache = DictParseCache()
doc = parse("# Hello **World**", cache=cache)

# Subsequent parses with same content hit cache
doc2 = parse("# Hello **World**", cache=cache)  # Cache hit
```

Use `hash_content()` and `hash_config()` for custom cache key computation. Enables faster incremental builds (undo/revert, duplicate content).

### Examples

Run examples from the repo:

```bash
python examples/basic/hello_markdown.py
python examples/notebooks/parse_notebook.py
python examples/directives/custom_directive.py
```

Covers: basic (hello, Markdown class), notebooks, AST (visitor, transform), directives (builtin, custom), incremental, differ, plugins (math, tables, footnotes), advanced (parallel parse, serialize).

## Installation

```bash
pip install patitas>=0.4.0
pip install patitas[syntax]   # Syntax highlighting via Rosettes
```

## Breaking Changes

None — all additions are backwards compatible.
